<head>
<link href="bootstrap.min.css" rel="stylesheet">
<style>
.container {
    height: 100vh;
    overflow: auto;
}
.maincols {
height:77%;

}
.heads {
padding:5px;
}
.msgbox {
height:30%;
padding-top:2%%;
background-color:#e5e8e7;
border-radius( 5px );
}
</style>
</head>
<body style="height:100%;">
<div class="row">
	<div class='col-10' style="height:100%; padding:0;">
		<div class='col-12 text-center border-bottom' style="height:20%;">
			<h1 >Query input</h1>
			<form class=" text-center" action="/action_page.php" style="padding:15px;">
				
				<input class="form-control col-8 offset-2" type="text" name="fname" style="border: 5px solid #7ec7a5"><br>
		
				<input class="form-control col-4 offset-4"  type="submit" value="Submit" > <!--style="background-color:#e5e8e7;border: 5px solid #7ec7a5"-->
			</form>
		</div>
		<div class='row text-center'>
			
				<div class='col-4 border-right maincols'>
					<h4 class="heads"><strong>Rule Based</strong></h4><hr>
					<div class="col-10 offset-1 msgbox">
						<p class="heads"><strong>Parsed Query</strong></p>
					</div><hr>
					<h5>Result</h5>
				</div>
				<div class='col-4 maincols'>
					<h4 class="heads"><strong>Graph</strong></h4><hr>
				</div>
				<div class='col-4 border-left maincols'>
					<h4 class="heads"><strong>h</strong></h4><hr>
				</div>
		</div>
		<div class="text-center" style="height:3%;background-color:#7ec7a5;"> 
			<p>This Demo is created to showcase <strong>NLIDB</strong> architectures available at <strong>Virtusa Pvt Ltd</strong><p>
		</div>

	</div>
	<div class='col-2 border-left text-center' style="height:100%; padding:0;">
	<h4 class="heads">Misc</h4>
	</div>
</div>




<script>
function send(){
	var msg = document.getElementById("msg").value;
	//check if message is empty
	if (msg == ''){
		return;
	}
	sentmsg(msg); //insert the message
	
	document.getElementById('msg').value = '' //empty the input field
	getresponse(msg)
	
	return;
}

//sent message appending function
function updside(){
	var prob = document.getElementById("prob");
	var ent = document.getElementById("ent");
	prob.innerHTML = problem;
	ent.innerHTML = entity;

}
function sentmsg(msg){
	var bfh = '<div class="col-8 offset-md-4 text-right"><div class="text-center "><p class="mesboxr">';
	var afh = '</p></div></div>';
	var tot = bfh + msg + afh;
	var div = document.getElementById("messages");
	div.innerHTML += bfh + msg + afh;
	scrolldown()
	return;
}

//received message apending fuction

function recvmsg(msg){
	var bfh = '<div class="col-8 text-left"><div><p class="text-center mesboxl">';
	var afh = '</p></div></div>';
	var tot = bfh + msg + afh;
	var div = document.getElementById("messages");
	div.innerHTML += bfh + msg + afh;
	scrolldown();
	return;
}

function scrolldown(){
		var objDiv = document.getElementById("messages"); //scroll down to bottom
		objDiv.scrollTop = objDiv.scrollHeight;
}
</script>
<script>

    
problem = '';
entity = '';
function getresponse(msg){

    $('.result').text("");
	//var inputs = '{ "ent":"ee" , "prob":"pp" , "message" :"' + msg + '"}'
    //inputs = getFormData(".inputs");
    
	var inputs = {};
	inputs["message"]=msg || '';
	inputs["prob"]=problem;
	inputs["ent"]=entity;
	
    //jquery AJAX post
    var url = "http://127.0.0.1:7000/hello"
    var data = JSON.stringify(inputs)
	//console.log(data);
	//serializes json into a string, opposite of parse
    $.post( url, data, function( data ) {
		console.log(data);
        response = data['results']['response'];
        recvmsg(response);
		problem = data['results']['problem'];
		entity = data['results']['entity'];
		updside();
		//alert(sec);
		
		//$('.result').append(response)
        });
	
    
}


//function getFormData(form){
//    var json={};
//    var array = $(form).serializeArray();
//    $.each(array, function(){
//       json[this.name]=this.value || '';
//    });
//    return json;
//}
//
//

</script>
<!--<script src="flask/js/jquery.js"></script>
<script src="flask/js/bootstrap.min.js"></script>-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    
    
    <!--raroc app -->
    
</body>





























